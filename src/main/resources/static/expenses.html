    <!doctype html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Expenses - SmartSpend</title><link rel="stylesheet" href="/styles.css"></head><body><div style="max-width:1000px;margin:40px auto;padding:20px"><div style="display:flex;justify-content:space-between;align-items:center"><h2>Expenses</h2><div><button class="btn" id="logout">Logout</button></div></div><div style="display:flex;gap:20px;margin-top:18px"><div style="flex:1;padding:18px;border-radius:12px;background:var(--glass)"><h3>Add expense</h3><form id="f"><input id="title" placeholder="Title" required style="width:100%;padding:10px;margin-bottom:10px;border-radius:8px;border:none"><input id="amount" placeholder="Amount" type="number" required style="width:100%;padding:10px;margin-bottom:10px;border-radius:8px;border:none"><input id="category" placeholder="Category" style="width:100%;padding:10px;margin-bottom:10px;border-radius:8px;border:none"><button class="btn">Add</button></form></div><div style="flex:2;padding:18px;border-radius:12px;background:var(--glass)"><h3>Recent</h3><ul id="list" style="list-style:none;padding:0;margin:0"></ul></div></div></div><script>const token = localStorage.getItem('token'); if(!token){ location.href='/login.html'; } document.getElementById('logout').addEventListener('click', ()=>{ localStorage.removeItem('token'); location.href='/login.html'; }); async function load(){ const res = await fetch('/api/expenses',{headers:{'X-AUTH-TOKEN': token}}); const list = await res.json().catch(()=>[]); render(list);} function render(list){ const ul = document.getElementById('list'); ul.innerHTML=''; list.forEach(it=>{ const li = document.createElement('li'); li.style.padding='12px'; li.style.borderBottom='1px solid rgba(255,255,255,0.03)'; li.innerHTML = `<strong>${it.title}</strong> — ₹${it.amount} <em style="opacity:.7">${it.category}</em> <button style="float:right" data-id="${it.id}">Delete</button>`; ul.appendChild(li); li.querySelector('button').addEventListener('click', async (e)=>{ const id = e.target.dataset.id; await fetch('/api/expenses/'+id, {method:'DELETE', headers:{'X-AUTH-TOKEN': token}}); load(); }); }); }
// form submit
document.getElementById('f').addEventListener('submit', async (e)=>{ e.preventDefault(); const payload = { title:document.getElementById('title').value, amount:document.getElementById('amount').value, category:document.getElementById('category').value }; await fetch('/api/expenses',{method:'POST',headers:{'Content-Type':'application/json','X-AUTH-TOKEN': token},body:JSON.stringify(payload)}); document.getElementById('title').value=''; document.getElementById('amount').value=''; document.getElementById('category').value=''; });
// SSE for realtime
const es = new EventSource('/api/expenses/stream');
es.onmessage = function(e){ try{ const obj = JSON.parse(e.data); // new expense
    load();
 }catch(err){ console.log('sse',e.data);} };
es.onerror = function(){ console.log('SSE error'); }
load();</script></body></html>
